{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Poopy","title":"Poopy"},{"location":"#poopy","text":"","title":"Poopy"},{"location":"1-overview/","text":"Overview Arrow application layer provides users the ability to create decentralized financial markets (DFMs) around user specified on-chain or off-chain assets (underliers). The primitives of a DFM consist of European style options and are standardized by a decentralized aggregate counterparty (DAC) which provides safety guarantees for settlement of financial obligations in the DFM.","title":"Overview"},{"location":"1-overview/#overview","text":"Arrow application layer provides users the ability to create decentralized financial markets (DFMs) around user specified on-chain or off-chain assets (underliers). The primitives of a DFM consist of European style options and are standardized by a decentralized aggregate counterparty (DAC) which provides safety guarantees for settlement of financial obligations in the DFM.","title":"Overview"},{"location":"2-definitions/","text":"Definitions Here we discuss the basic definitions of the essential elements of the Arrow protocol. Primitives of Arrow DFMs: Underliers and Options The two primitives on Arrow DFMs are options and the underlier on which they are built. In what follows below, we define both. An underlier is a reference asset which serves as the basis for determining the magnitude of obligations. Traditional European contracts give the right but not the obligation to either buy or sell a certain amount of the underlier at some pre-specified price called the strike price \\(K\\) and at a pre-specified time called the expiration time \\(T\\) . In the case of buying, this contract is called a European call option and the associated time \\(T\\) payoff is $$ C_T(S_T,K)=(S_T -K)^+ $$ where \\(S_T\\) is the underlier's, or reference asset's, price at time \\(T\\) . The positive function \\((\\cdot)^+\\) implies that the owner of the European call will get the asset and will pay \\(K\\) , thus netting the value \\(S_T-K\\) at expiration if \\(S_T > K\\) or \\(0\\) at expiration if \\(S_T\\le K\\) as they will not choose to purchase the asset for a more expensive price than the current price of the underlier. Similarly defined, for the selling case, are European put option which have a time \\(T\\) payoff of $$ P_T(S_T,K)=(K-S_T)^+ $$ The positive function \\((\\cdot)^+\\) implies that the owner of the European put will get the right to sell the asset at \\(K\\) , thus netting the value \\(K-S_T\\) at expiration if \\(K > S_T\\) or \\(0\\) at expiration if \\(K \\le S_T\\) as they will not choose to sell the asset less than the current price of the underlier. Payoff graphs? Cash Settlement Cash settlement on Arrow DFMs is the payment of obligations of options at their expiration time in terms of aUSD. This means in the definitions of European options above instead of exchanging the \"physical\" underlier while buying or selling, the payoffs are instead given as a payment in aUSD. Thus, the call option holder will receive \\((S_T - K)^+\\) aUSD and the put holder will receive \\((K-S_T)^+\\) aUSD at expiration time T. Buyers and Writers On Arrow DFMs, writers are users who initiate (or mint) option contracts by providing the Arrow protocol with some specified initial capital. Buyers are users who then purchase these contracts, originally minted by the writers, and hold the contractual rights that the European options grant. Counterparty A Counterparties are important for settlement on chain vs real world bc of lack of central clearing authority. Stablecoins Stablecoins on Arrow are portfolios of options that replicate the value of a given on-chain or off-chain underlier (or reference asset). Stablecoins can be made for \"stable\" assets such as established fiat currencies (USD, GBP, JPY, EUR), or they can be made for risky assets such as stocks or cryptocurrencies. Special Liquidity Vehicle (SLV) A special liquidity vehicle is a customized pool of liquid assets which can be used to cover obligations in the event of a primary asset pool becoming insolvent. Decentralized Aggregate Counterparty (DAC) A DAC consists of two pools from which obligations are settled: Collateral Pool: option writers mint contracts to be exchanged by providing collateral set by the protocol. The collateral is pooled with other writers on the same underlier. Tail Liquidity Pool: a yield farming pool that provides insurance to the collateral pool if it becomes insolvent. The yield farmers are compensated with the fees collected from users of the platform. This is the Arrow DFMs' special liquidity vehicle (SLV). Should we put in example from slides for pools? Decentralized Financial Markets A DFM is a DAC coupled with an option factory. An option factory is a protocol for issuing (minting) new option smart contracts when a user inputs a required amount of collateral which is locked until expiration by the contract. Automated Market Maker (AMM) An AMM is a type of exchange protocol where an asset is traded against a liquidity pool with prices being determined by an algorithm rather than an order book. Limit Order Book (LOB) A limit order book is an exchange protocol where users can specify a price and quantity at which they would like to buy or sell. This price quantity pair as well as the direction (buy or sell) is called a limit order. Other users can then see a list of these open orders and trade against either the highest bid price (sell price) or lowest ask price (buy price). Crowd Financing Crowd financing is a way of sourcing capital in a decentralized manner to back financial products which have uncertain obligations in the future. This capital is put toward the future obligations in return for possible profit if the obligations fall below the asset value at expiration.","title":"Definitions"},{"location":"2-definitions/#definitions","text":"Here we discuss the basic definitions of the essential elements of the Arrow protocol.","title":"Definitions"},{"location":"2-definitions/#primitives-of-arrow-dfms-underliers-and-options","text":"The two primitives on Arrow DFMs are options and the underlier on which they are built. In what follows below, we define both. An underlier is a reference asset which serves as the basis for determining the magnitude of obligations. Traditional European contracts give the right but not the obligation to either buy or sell a certain amount of the underlier at some pre-specified price called the strike price \\(K\\) and at a pre-specified time called the expiration time \\(T\\) . In the case of buying, this contract is called a European call option and the associated time \\(T\\) payoff is $$ C_T(S_T,K)=(S_T -K)^+ $$ where \\(S_T\\) is the underlier's, or reference asset's, price at time \\(T\\) . The positive function \\((\\cdot)^+\\) implies that the owner of the European call will get the asset and will pay \\(K\\) , thus netting the value \\(S_T-K\\) at expiration if \\(S_T > K\\) or \\(0\\) at expiration if \\(S_T\\le K\\) as they will not choose to purchase the asset for a more expensive price than the current price of the underlier. Similarly defined, for the selling case, are European put option which have a time \\(T\\) payoff of $$ P_T(S_T,K)=(K-S_T)^+ $$ The positive function \\((\\cdot)^+\\) implies that the owner of the European put will get the right to sell the asset at \\(K\\) , thus netting the value \\(K-S_T\\) at expiration if \\(K > S_T\\) or \\(0\\) at expiration if \\(K \\le S_T\\) as they will not choose to sell the asset less than the current price of the underlier. Payoff graphs?","title":"Primitives of Arrow DFMs: Underliers and Options"},{"location":"2-definitions/#cash-settlement","text":"Cash settlement on Arrow DFMs is the payment of obligations of options at their expiration time in terms of aUSD. This means in the definitions of European options above instead of exchanging the \"physical\" underlier while buying or selling, the payoffs are instead given as a payment in aUSD. Thus, the call option holder will receive \\((S_T - K)^+\\) aUSD and the put holder will receive \\((K-S_T)^+\\) aUSD at expiration time T.","title":"Cash Settlement"},{"location":"2-definitions/#buyers-and-writers","text":"On Arrow DFMs, writers are users who initiate (or mint) option contracts by providing the Arrow protocol with some specified initial capital. Buyers are users who then purchase these contracts, originally minted by the writers, and hold the contractual rights that the European options grant.","title":"Buyers and Writers"},{"location":"2-definitions/#counterparty","text":"A Counterparties are important for settlement on chain vs real world bc of lack of central clearing authority.","title":"Counterparty"},{"location":"2-definitions/#stablecoins","text":"Stablecoins on Arrow are portfolios of options that replicate the value of a given on-chain or off-chain underlier (or reference asset). Stablecoins can be made for \"stable\" assets such as established fiat currencies (USD, GBP, JPY, EUR), or they can be made for risky assets such as stocks or cryptocurrencies.","title":"Stablecoins"},{"location":"2-definitions/#special-liquidity-vehicle-slv","text":"A special liquidity vehicle is a customized pool of liquid assets which can be used to cover obligations in the event of a primary asset pool becoming insolvent.","title":"Special Liquidity Vehicle (SLV)"},{"location":"2-definitions/#decentralized-aggregate-counterparty-dac","text":"A DAC consists of two pools from which obligations are settled: Collateral Pool: option writers mint contracts to be exchanged by providing collateral set by the protocol. The collateral is pooled with other writers on the same underlier. Tail Liquidity Pool: a yield farming pool that provides insurance to the collateral pool if it becomes insolvent. The yield farmers are compensated with the fees collected from users of the platform. This is the Arrow DFMs' special liquidity vehicle (SLV). Should we put in example from slides for pools?","title":"Decentralized Aggregate Counterparty (DAC)"},{"location":"2-definitions/#decentralized-financial-markets","text":"A DFM is a DAC coupled with an option factory. An option factory is a protocol for issuing (minting) new option smart contracts when a user inputs a required amount of collateral which is locked until expiration by the contract.","title":"Decentralized Financial Markets"},{"location":"2-definitions/#automated-market-maker-amm","text":"An AMM is a type of exchange protocol where an asset is traded against a liquidity pool with prices being determined by an algorithm rather than an order book.","title":"Automated Market Maker (AMM)"},{"location":"2-definitions/#limit-order-book-lob","text":"A limit order book is an exchange protocol where users can specify a price and quantity at which they would like to buy or sell. This price quantity pair as well as the direction (buy or sell) is called a limit order. Other users can then see a list of these open orders and trade against either the highest bid price (sell price) or lowest ask price (buy price).","title":"Limit Order Book (LOB)"},{"location":"2-definitions/#crowd-financing","text":"Crowd financing is a way of sourcing capital in a decentralized manner to back financial products which have uncertain obligations in the future. This capital is put toward the future obligations in return for possible profit if the obligations fall below the asset value at expiration.","title":"Crowd Financing"},{"location":"3-DAC_Example/","text":"DAC Example We first discuss the DAC Settlement Example: AAPL Stock Calls: No Pooling Suppose at \\(t=2\\) \\(S_2 = 135\\) . The first buyer is owed \\(135-100=35\\) \\begin{table} No Pooling: \\hspace{12mm} \\begin{tabular}{|l| c| c|} \\hline t=2 & K=100 & K=150 \\ \\hline Assets & 25 & 15\\ Liabilities & 35 & 0 \\ \\hline Residual &-10 & 15\\ \\hline \\end{tabular} \\end{table} Without pooling, \\(35 > 25 = m_0(K_1) + p_0(K_1)\\) , and the buyer must request the writer pay the difference, which cannot be enforced ex-post. Buyers should not agree to a contract like this ahead of time. DAC Settlement Example: AAPL Stock Calls: Pooling With pooling, since the owner of the contract at \\(K_2\\) is owed nothing, the \\(K_1\\) buyer will be paid without having to enforce payment ex-post since \\(35 < 40\\) where \\(40 = m_0(K_1) + p_0(K_1) + m_1(K_2) + p_1(K_2)\\) . \\begin{table} Pooling: \\hspace{12mm} \\begin{tabular}{|l| c| c|} \\hline t=2 & K= [100, 150] \\ \\hline Assets & 40\\ Liabilities & 35 \\ \\hline Residual & 5\\ \\hline \\end{tabular} \\end{table} In this case, the writer at \\(K=105\\) is refunded \\(5\\) out of the original collateral of \\(10\\) . Writers must not expect to lose collateral. To see how the pool can work out in favor of the writers, note that under the pooling rule, the writer at \\(K=105\\) is entitled to the residual equity of the pool, which exceeds her initial collateral \\(40 - (S_{2} - 100) > m_1(K_2)\\) when \\(S_{2} \\leq 125\\) . Suppose instead that \\(t=2\\) \\(S_2 = 150\\) . The pooled balance sheet is insolvent. \\ \\begin{table} Pooling: \\hspace{12mm} \\begin{tabular}{|l| c| c|} \\hline t=2 & K= [100, 150] \\ \\hline Assets & 40\\ Liabilities & 50 \\ \\hline Residual & -5\\ \\hline \\end{tabular} \\end{table} Even with pooling, the buyer of the claim to a strike at 100 is only paid \\(S^{*} - 100\\) with \\(S^{*} = 140 < S_{T}\\) . This is the role of the tail liquidity pool, so that a writer of a contract that is promised payments in the collateral pool can add to the asset side of their balance sheet an insurance claim that pays the difference \\((S_{T} - S^{*})^+\\) . \\ \\begin{table} With insolvency insurance: \\hspace{12mm} \\begin{tabular}{|l| c| c|} \\hline t=2 & K= [100, 150] \\ \\hline Assets & 40 + \\text{price}(\\gamma_{B})\\ Liabilities & 50 \\ \\hline Residual & -5 + \\gamma_{B} = 0\\ \\hline \\end{tabular} \\end{table} In this case, the balance sheet adjusts to set the residual value to zero. Zero Residual Equity in Collateral Pool -- Setting of \\(S^*\\) In the case where the residual equity of the first pool is \\(0\\) , there is a unique threshold \\(0 < S^* \\leq S_{T}\\) such that \\begin{align } A_{T} - L_{T}(S) = \\begin{cases} = 0 \\hspace{12mm} S = S^ \\ < 0 \\hspace{12mm} S > S^* \\ 0 \\hspace{12mm} S < S^ \\ \\end{cases} \\end{align } where \\(A_{T}\\) are the assets at expiration and \\(L_{T}(S)\\) are the liabilities at expiration. When an \\(S^*\\) needs to be chosen, no liabilities are paid beyond \\(S^*\\) . Specifically, for each open buyer contract (call) with strike \\(k_{j} \\leq S^*\\) the contract is paid \\(S^* - k_{j} \\leq S_{T} - k_{j}\\) . The clearing condition can be expressed by adding up every such contract. Find \\(S^*\\) such that $$ 0 = \\sum_{k_{j} \\leq S^ }n_{k_j, T}(S^{ } - k_{j}) - A_{T} $$ where \\(n_{k_j, T}\\) is the number of buyer liabilities in the pool at time \\(T\\) with strike \\(k_j\\) . The threshold \\(S^{*}\\) in practice is found using a two-step iterative deterministic algorithm described in the preliminary whitepaper. Liquidation Scenarios The two capital pools are calibrated to keep the probability of systemic failure near zero. However, in a failure event, \\begin{itemize} \\item Writer residual equity claims are junior to buyer liabilities \\item We need to find a threshold \\(S^{**}: S_{T} > S^{**} > S^{*}\\) s.t. the assets in the tail liquidity pool are used to cover all liabilities up to \\(S^{**}\\) \\end{itemize} \\vspace{4mm} \\indent So, continuing in our example, suppose instead that \\(t=2\\) \\(S_2 = 250\\) , and suppose financiers of the tail liquidity pool have posted a quantity \\(X=90\\) to cover insolvency claims. \\begin{itemize} \\item We have the same \\(S^{*} = 140\\) , so \\(S_{2} - S^{*} > 90\\) . \\item In this case, buyers have insolvency claims paid up to the threshold \\(S^{**}=190\\) \\item \\(S^{**}\\) is chosen such that assets net of liabilities are zero, i.e., \\(S^{**} - S^{*} + S^{**} - K_{2} = 90\\) . \\end{itemize}","title":"DAC Example"},{"location":"3-DAC_Example/#dac-example","text":"We first discuss the","title":"DAC Example"},{"location":"3-DAC_Example/#dac-settlement-example-aapl-stock-calls-no-pooling","text":"Suppose at \\(t=2\\) \\(S_2 = 135\\) . The first buyer is owed \\(135-100=35\\) \\begin{table} No Pooling: \\hspace{12mm} \\begin{tabular}{|l| c| c|} \\hline t=2 & K=100 & K=150 \\ \\hline Assets & 25 & 15\\ Liabilities & 35 & 0 \\ \\hline Residual &-10 & 15\\ \\hline \\end{tabular} \\end{table} Without pooling, \\(35 > 25 = m_0(K_1) + p_0(K_1)\\) , and the buyer must request the writer pay the difference, which cannot be enforced ex-post. Buyers should not agree to a contract like this ahead of time.","title":"DAC Settlement Example: AAPL Stock Calls: No Pooling"},{"location":"3-DAC_Example/#dac-settlement-example-aapl-stock-calls-pooling","text":"With pooling, since the owner of the contract at \\(K_2\\) is owed nothing, the \\(K_1\\) buyer will be paid without having to enforce payment ex-post since \\(35 < 40\\) where \\(40 = m_0(K_1) + p_0(K_1) + m_1(K_2) + p_1(K_2)\\) . \\begin{table} Pooling: \\hspace{12mm} \\begin{tabular}{|l| c| c|} \\hline t=2 & K= [100, 150] \\ \\hline Assets & 40\\ Liabilities & 35 \\ \\hline Residual & 5\\ \\hline \\end{tabular} \\end{table} In this case, the writer at \\(K=105\\) is refunded \\(5\\) out of the original collateral of \\(10\\) . Writers must not expect to lose collateral. To see how the pool can work out in favor of the writers, note that under the pooling rule, the writer at \\(K=105\\) is entitled to the residual equity of the pool, which exceeds her initial collateral \\(40 - (S_{2} - 100) > m_1(K_2)\\) when \\(S_{2} \\leq 125\\) . Suppose instead that \\(t=2\\) \\(S_2 = 150\\) . The pooled balance sheet is insolvent. \\ \\begin{table} Pooling: \\hspace{12mm} \\begin{tabular}{|l| c| c|} \\hline t=2 & K= [100, 150] \\ \\hline Assets & 40\\ Liabilities & 50 \\ \\hline Residual & -5\\ \\hline \\end{tabular} \\end{table} Even with pooling, the buyer of the claim to a strike at 100 is only paid \\(S^{*} - 100\\) with \\(S^{*} = 140 < S_{T}\\) . This is the role of the tail liquidity pool, so that a writer of a contract that is promised payments in the collateral pool can add to the asset side of their balance sheet an insurance claim that pays the difference \\((S_{T} - S^{*})^+\\) . \\ \\begin{table} With insolvency insurance: \\hspace{12mm} \\begin{tabular}{|l| c| c|} \\hline t=2 & K= [100, 150] \\ \\hline Assets & 40 + \\text{price}(\\gamma_{B})\\ Liabilities & 50 \\ \\hline Residual & -5 + \\gamma_{B} = 0\\ \\hline \\end{tabular} \\end{table} In this case, the balance sheet adjusts to set the residual value to zero.","title":"DAC Settlement Example: AAPL Stock Calls: Pooling"},{"location":"3-DAC_Example/#zero-residual-equity-in-collateral-pool-setting-of-s","text":"In the case where the residual equity of the first pool is \\(0\\) , there is a unique threshold \\(0 < S^* \\leq S_{T}\\) such that \\begin{align } A_{T} - L_{T}(S) = \\begin{cases} = 0 \\hspace{12mm} S = S^ \\ < 0 \\hspace{12mm} S > S^* \\ 0 \\hspace{12mm} S < S^ \\ \\end{cases} \\end{align } where \\(A_{T}\\) are the assets at expiration and \\(L_{T}(S)\\) are the liabilities at expiration. When an \\(S^*\\) needs to be chosen, no liabilities are paid beyond \\(S^*\\) . Specifically, for each open buyer contract (call) with strike \\(k_{j} \\leq S^*\\) the contract is paid \\(S^* - k_{j} \\leq S_{T} - k_{j}\\) . The clearing condition can be expressed by adding up every such contract. Find \\(S^*\\) such that $$ 0 = \\sum_{k_{j} \\leq S^ }n_{k_j, T}(S^{ } - k_{j}) - A_{T} $$ where \\(n_{k_j, T}\\) is the number of buyer liabilities in the pool at time \\(T\\) with strike \\(k_j\\) . The threshold \\(S^{*}\\) in practice is found using a two-step iterative deterministic algorithm described in the preliminary whitepaper.","title":"Zero Residual Equity in Collateral Pool -- Setting of \\(S^*\\)"},{"location":"3-DAC_Example/#liquidation-scenarios","text":"The two capital pools are calibrated to keep the probability of systemic failure near zero. However, in a failure event, \\begin{itemize} \\item Writer residual equity claims are junior to buyer liabilities \\item We need to find a threshold \\(S^{**}: S_{T} > S^{**} > S^{*}\\) s.t. the assets in the tail liquidity pool are used to cover all liabilities up to \\(S^{**}\\) \\end{itemize} \\vspace{4mm} \\indent So, continuing in our example, suppose instead that \\(t=2\\) \\(S_2 = 250\\) , and suppose financiers of the tail liquidity pool have posted a quantity \\(X=90\\) to cover insolvency claims. \\begin{itemize} \\item We have the same \\(S^{*} = 140\\) , so \\(S_{2} - S^{*} > 90\\) . \\item In this case, buyers have insolvency claims paid up to the threshold \\(S^{**}=190\\) \\item \\(S^{**}\\) is chosen such that assets net of liabilities are zero, i.e., \\(S^{**} - S^{*} + S^{**} - K_{2} = 90\\) . \\end{itemize}","title":"Liquidation Scenarios"},{"location":"4-writingBuyingOptions/","text":"Writing and Buying Contracts","title":"Writing and Buying Contracts"},{"location":"4-writingBuyingOptions/#writing-and-buying-contracts","text":"","title":"Writing and Buying Contracts"},{"location":"5-buyingShortingSynths/","text":"Buying and Shorting Synths Buying","title":"Buying and Shorting Synths"},{"location":"5-buyingShortingSynths/#buying-and-shorting-synths","text":"Buying","title":"Buying and Shorting Synths"}]}